import numpy as np
import matplotlib as mpl
mpl.use('Agg')
import matplotlib.pyplot as plt
from numpy import mean, var, sqrt
from matplotlib import cm
from mpl_toolkits.mplot3d import Axes3D

from file_process import readLatency, plotLatency

dirName = "../run/exp/"
pRate = 1000.0
distrNameA = "exp"
distrNameB = "cst"
mu = 2000.0

bRateList = np.array([1 + 0.05*(i+1) for i in range(20)])*pRate
bucketSizeList = [i+1 for i in range(8)]
test = "token_test"
readLatency(test, [dirName], [distrNameA], bRateList, bucketSizeList)
exit(0)
serDelay = np.array([array([0.18287628, 0.08393965, 0.05155601, 0.03574191, 0.02651094,
       0.02054097, 0.01641276, 0.01341986, 0.01117207, 0.00943691,
       0.00806768, 0.00696749, 0.00606999, 0.00532833, 0.00470857,
       0.00418561, 0.00374053, 0.0033588 , 0.00302916, 0.00274272]), array([0.1808332 , 0.08216125, 0.04999825, 0.0343696 , 0.02529565,
       0.01945953, 0.01544615, 0.01255234, 0.01039049, 0.00873025,
       0.00742664, 0.00638417, 0.00553765, 0.00484117, 0.00426162,
       0.00377456, 0.00336161, 0.00300875, 0.00270512, 0.00244217]), array([0.17824088, 0.07992904, 0.04806222, 0.03267943, 0.02381128,
       0.01814879, 0.0142829 , 0.0115152 , 0.00946184, 0.00789544,
       0.0066734 , 0.0057022 , 0.00491821, 0.00427685, 0.00374604,
       0.00330226, 0.00292787, 0.00260948, 0.00233675, 0.0021016 ]), array([0.17495166, 0.07712724, 0.04565606, 0.03059777, 0.02199828,
       0.01656011, 0.012883  , 0.0102753 , 0.00835844, 0.00690922,
       0.00578833, 0.0049049 , 0.00419744, 0.00362311, 0.00315128,
       0.00275958, 0.00243137, 0.00215406, 0.001918  , 0.00171568]), array([0.17116461, 0.07394387, 0.04295522, 0.02828712, 0.02000647,
       0.01483132, 0.01137307, 0.00894892, 0.00718714, 0.0058698 ,
       0.00486178, 0.0040755 , 0.00345211, 0.00295089, 0.00254294,
       0.00220729, 0.00192847, 0.00169484, 0.00149756, 0.00132978]), array([0.16715152, 0.07062508, 0.04018154, 0.02594693, 0.01801506,
       0.0131235 , 0.00989805, 0.00766671, 0.00606589, 0.00488392,
       0.00399054, 0.00330196, 0.00276232, 0.00233328, 0.00198786,
       0.00170665, 0.00147542, 0.0012836 , 0.00112315, 0.00098797]), array([0.16306454, 0.06730906, 0.03745888, 0.02368748, 0.01612186,
       0.01152327, 0.00853466, 0.00649663, 0.005055  , 0.00400519,
       0.00322236, 0.00262688, 0.00216617, 0.00180444, 0.00151675,
       0.00128531, 0.0010972 , 0.00094289, 0.00081525, 0.00070886]), array([0.15915397, 0.06421331, 0.03497559, 0.02167171, 0.01446797,
       0.01015304, 0.00738935, 0.00553154, 0.0042357 , 0.0033049 ,
       0.00261998, 0.00210569, 0.00171277, 0.00140801, 0.00116849,
       0.00097801, 0.00082493, 0.00070071, 0.00059904, 0.00051517]), array([0.15538921, 0.06130448, 0.03269536, 0.01986088, 0.01301296,
       0.00897145, 0.00642047, 0.00473002, 0.00356723, 0.00274321,
       0.00214476, 0.00170105, 0.00136617, 0.0011095 , 0.00091006,
       0.0007532 , 0.00062847, 0.00052831, 0.00044716, 0.00038085]), array([0.15166216, 0.05848459, 0.03052776, 0.01817082, 0.01167823,
       0.00790499, 0.0055593 , 0.00402786, 0.00298961, 0.00226415,
       0.00174443, 0.00136416, 0.00108083, 0.00086636, 0.00070171,
       0.00057372, 0.0004731 , 0.00039319, 0.00032913, 0.00027733]), array([0.14802589, 0.05579533, 0.02850445, 0.01662491, 0.01048053,
       0.00696531, 0.00481354, 0.00342976, 0.0025053 , 0.00186848,
       0.00141853, 0.0010937 , 0.00085479, 0.0006762 , 0.00054076,
       0.00043671, 0.00035585, 0.00029234, 0.00024198, 0.00020168]), array([0.14449497, 0.05324462, 0.02662754, 0.01522078, 0.00941429,
       0.00614462, 0.00417403, 0.00292579, 0.00210402, 0.00154593,
       0.00115697, 0.00087987, 0.00067866, 0.0005301 , 0.00041878,
       0.00033424, 0.00026928, 0.00021881, 0.0001792 , 0.00014783]), array([1.41040283e-01, 5.08041150e-02, 2.48690631e-02, 1.39310342e-02,
       8.45307171e-03, 5.41778145e-03, 3.61710929e-03, 2.49388669e-03,
       1.76535103e-03, 1.27764290e-03, 9.42438410e-04, 7.06818895e-04,
       5.37942235e-04, 4.14812256e-04, 3.23659605e-04, 2.55251522e-04,
       2.03274624e-04, 1.63335688e-04, 1.32329199e-04, 1.08028408e-04]), array([1.37665500e-01, 4.84732888e-02, 2.32249203e-02, 1.27490957e-02,
       7.58876025e-03, 4.77587717e-03, 3.13361567e-03, 2.12499086e-03,
       1.48054749e-03, 1.05536003e-03, 7.67202886e-04, 5.67384479e-04,
       4.26034591e-04, 3.24274179e-04, 2.49860681e-04, 1.94675044e-04,
       1.53224989e-04, 1.21728744e-04, 9.75404238e-05, 7.87818371e-05]), array([1.34374590e-01, 4.62518510e-02, 2.16914226e-02, 1.16689962e-02,
       6.81408518e-03, 4.21105511e-03, 2.71559475e-03, 1.81136071e-03,
       1.24227260e-03, 8.72236417e-04, 6.24960152e-04, 4.55803117e-04,
       3.37701899e-04, 2.53749139e-04, 1.93105119e-04, 1.48660859e-04,
       1.15659482e-04, 9.08602545e-05, 7.20192358e-05, 5.75596075e-05]), array([1.31162571e-01, 4.41324057e-02, 2.02593402e-02, 1.06805418e-02,
       6.11861133e-03, 3.71313750e-03, 2.35342963e-03, 1.54410068e-03,
       1.04241637e-03, 7.20951097e-04, 5.09145767e-04, 3.66214951e-04,
       2.67728102e-04, 1.98601822e-04, 1.49276889e-04, 1.13554497e-04,
       8.73322586e-05, 6.78452013e-05, 5.31987630e-05, 4.20751571e-05])])
plotLatency(test, [dirName], [distrNameA], bRateList, bucketSizeList, pRate, distrNameB, mu, serDelay)
